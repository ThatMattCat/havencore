[supervisord]
nodaemon=true
logfile=/dev/stdout
logfile_maxbytes=0
loglevel=info

[program:vllm]
command=vllm serve Qwen/Qwen2.5-Omni-7B --port 8100 --host 0.0.0.0 --dtype bfloat16 --allowed-local-media-path "/app/uploads/"
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
autorestart=true
priority=1

[program:gradio]
command=python3 -u /app/gradio_app.py
environment=VLLM_SERVER_URL="http://localhost:8100/v1/chat/completions",GRADIO_ROOT_PATH=""
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
autorestart=true
priority=2
startsecs=10